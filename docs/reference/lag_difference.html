<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>lag_difference — lag_difference • waterlevel</title>

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="lag_difference — lag_difference" />

<meta property="og:description" content="Calculate differences for the dependent and independent variables and remove any NA values.  This modifies the data.table in place." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">waterlevel</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/responsefunctions.html">Response functions</a>
    </li>
    <li>
      <a href="../articles/staticbe.html">Static Barometric/Loading Efficiency Calculations</a>
    </li>
    <li>
      <a href="../articles/synthetic_example.html">Synthetic example</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>lag_difference</h1>
    
    <div class="hidden name"><code>lag_difference.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Calculate differences for the dependent and independent variables and remove any NA values.  This modifies the data.table in place.</p>
    
    </div>

    <pre class="usage"><span class='fu'>lag_difference</span>(<span class='no'>dat</span>, <span class='kw'>var_name</span> <span class='kw'>=</span> <span class='st'>"wl"</span>, <span class='kw'>lag_space</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>inverse</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>remove_na</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>dat</th>
      <td><p>data that has the independent and dependent variables (data.table)</p></td>
    </tr>
    <tr>
      <th>var_name</th>
      <td><p>name of the column to lag (character)</p></td>
    </tr>
    <tr>
      <th>lag_space</th>
      <td><p>space between difference calculation in number of observations</p></td>
    </tr>
    <tr>
      <th>inverse</th>
      <td><p>whether the barometric relationship is inverse
(TRUE means that when the barometric pressure goes up the measured water
level goes down (vented transducer, depth to water), FALSE means that when 
the barometric pressure goes up so does the measured pressure 
(non-vented transducer)) (logical).</p></td>
    </tr>
    <tr>
      <th>remove_na</th>
      <td><p>remove NA values (logical)</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>data.table with lagged differences</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/library'>library</a></span>(<span class='no'>data.table</span>)
<span class='no'>datetime</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq.POSIXt'>seq.POSIXt</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.POSIXlt'>as.POSIXct</a></span>(<span class='st'>"2016-01-01 12:00:00"</span>),
                       <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/as.POSIXlt'>as.POSIXct</a></span>(<span class='st'>"2016-01-05 12:00:00"</span>), <span class='kw'>by</span><span class='kw'>=</span><span class='st'>'hour'</span> )
<span class='no'>baro</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/Trig'>sin</a></span>(<span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/seq'>seq</a></span>(<span class='fl'>0</span>, <span class='fl'>2</span>*<span class='no'>pi</span>, <span class='kw'>length.out</span> <span class='kw'>=</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/base/topics/length'>length</a></span>(<span class='no'>datetime</span>)))
<span class='no'>wl</span> <span class='kw'>&lt;-</span> <span class='fl'>0.4</span> * <span class='no'>baro</span>
<span class='no'>dat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://www.rdocumentation.org/packages/data.table/topics/data.table'>data.table</a></span>(<span class='no'>baro</span>, <span class='no'>wl</span>, <span class='no'>datetime</span>)
<span class='fu'>lag_difference</span>(<span class='no'>dat</span>, <span class='kw'>lag_space</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='kw'>remove_na</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</div><div class='output co'>#&gt;              baro            wl            datetime
#&gt;  1:  0.000000e+00            NA 2016-01-01 12:00:00
#&gt;  2:  6.540313e-02  0.0261612517 2016-01-01 13:00:00
#&gt;  3:  1.305262e-01  0.0260492252 2016-01-01 14:00:00
#&gt;  4:  1.950903e-01  0.0258256519 2016-01-01 15:00:00
#&gt;  5:  2.588190e-01  0.0254914892 2016-01-01 16:00:00
#&gt;  6:  3.214395e-01  0.0250481681 2016-01-01 17:00:00
#&gt;  7:  3.826834e-01  0.0244975868 2016-01-01 18:00:00
#&gt;  8:  4.422887e-01  0.0238421031 2016-01-01 19:00:00
#&gt;  9:  5.000000e-01  0.0230845239 2016-01-01 20:00:00
#&gt; 10:  5.555702e-01  0.0222280932 2016-01-01 21:00:00
#&gt; 11:  6.087614e-01  0.0212764784 2016-01-01 22:00:00
#&gt; 12:  6.593458e-01  0.0202337544 2016-01-01 23:00:00
#&gt; 13:  7.071068e-01  0.0191043864 2016-01-02 00:00:00
#&gt; 14:  7.518398e-01  0.0178932105 2016-01-02 01:00:00
#&gt; 15:  7.933533e-01  0.0166054131 2016-01-02 02:00:00
#&gt; 16:  8.314696e-01  0.0152465088 2016-01-02 03:00:00
#&gt; 17:  8.660254e-01  0.0138223166 2016-01-02 04:00:00
#&gt; 18:  8.968727e-01  0.0123389351 2016-01-02 05:00:00
#&gt; 19:  9.238795e-01  0.0108027164 2016-01-02 06:00:00
#&gt; 20:  9.469301e-01  0.0092202388 2016-01-02 07:00:00
#&gt; 21:  9.659258e-01  0.0075982787 2016-01-02 08:00:00
#&gt; 22:  9.807853e-01  0.0059437816 2016-01-02 09:00:00
#&gt; 23:  9.914449e-01  0.0042638324 2016-01-02 10:00:00
#&gt; 24:  9.978589e-01  0.0025656247 2016-01-02 11:00:00
#&gt; 25:  1.000000e+00  0.0008564307 2016-01-02 12:00:00
#&gt; 26:  9.978589e-01 -0.0008564307 2016-01-02 13:00:00
#&gt; 27:  9.914449e-01 -0.0025656247 2016-01-02 14:00:00
#&gt; 28:  9.807853e-01 -0.0042638324 2016-01-02 15:00:00
#&gt; 29:  9.659258e-01 -0.0059437816 2016-01-02 16:00:00
#&gt; 30:  9.469301e-01 -0.0075982787 2016-01-02 17:00:00
#&gt; 31:  9.238795e-01 -0.0092202388 2016-01-02 18:00:00
#&gt; 32:  8.968727e-01 -0.0108027164 2016-01-02 19:00:00
#&gt; 33:  8.660254e-01 -0.0123389351 2016-01-02 20:00:00
#&gt; 34:  8.314696e-01 -0.0138223166 2016-01-02 21:00:00
#&gt; 35:  7.933533e-01 -0.0152465088 2016-01-02 22:00:00
#&gt; 36:  7.518398e-01 -0.0166054131 2016-01-02 23:00:00
#&gt; 37:  7.071068e-01 -0.0178932105 2016-01-03 00:00:00
#&gt; 38:  6.593458e-01 -0.0191043864 2016-01-03 01:00:00
#&gt; 39:  6.087614e-01 -0.0202337544 2016-01-03 02:00:00
#&gt; 40:  5.555702e-01 -0.0212764784 2016-01-03 03:00:00
#&gt; 41:  5.000000e-01 -0.0222280932 2016-01-03 04:00:00
#&gt; 42:  4.422887e-01 -0.0230845239 2016-01-03 05:00:00
#&gt; 43:  3.826834e-01 -0.0238421031 2016-01-03 06:00:00
#&gt; 44:  3.214395e-01 -0.0244975868 2016-01-03 07:00:00
#&gt; 45:  2.588190e-01 -0.0250481681 2016-01-03 08:00:00
#&gt; 46:  1.950903e-01 -0.0254914892 2016-01-03 09:00:00
#&gt; 47:  1.305262e-01 -0.0258256519 2016-01-03 10:00:00
#&gt; 48:  6.540313e-02 -0.0260492252 2016-01-03 11:00:00
#&gt; 49:  1.224647e-16 -0.0261612517 2016-01-03 12:00:00
#&gt; 50: -6.540313e-02 -0.0261612517 2016-01-03 13:00:00
#&gt; 51: -1.305262e-01 -0.0260492252 2016-01-03 14:00:00
#&gt; 52: -1.950903e-01 -0.0258256519 2016-01-03 15:00:00
#&gt; 53: -2.588190e-01 -0.0254914892 2016-01-03 16:00:00
#&gt; 54: -3.214395e-01 -0.0250481681 2016-01-03 17:00:00
#&gt; 55: -3.826834e-01 -0.0244975868 2016-01-03 18:00:00
#&gt; 56: -4.422887e-01 -0.0238421031 2016-01-03 19:00:00
#&gt; 57: -5.000000e-01 -0.0230845239 2016-01-03 20:00:00
#&gt; 58: -5.555702e-01 -0.0222280932 2016-01-03 21:00:00
#&gt; 59: -6.087614e-01 -0.0212764784 2016-01-03 22:00:00
#&gt; 60: -6.593458e-01 -0.0202337544 2016-01-03 23:00:00
#&gt; 61: -7.071068e-01 -0.0191043864 2016-01-04 00:00:00
#&gt; 62: -7.518398e-01 -0.0178932105 2016-01-04 01:00:00
#&gt; 63: -7.933533e-01 -0.0166054131 2016-01-04 02:00:00
#&gt; 64: -8.314696e-01 -0.0152465088 2016-01-04 03:00:00
#&gt; 65: -8.660254e-01 -0.0138223166 2016-01-04 04:00:00
#&gt; 66: -8.968727e-01 -0.0123389351 2016-01-04 05:00:00
#&gt; 67: -9.238795e-01 -0.0108027164 2016-01-04 06:00:00
#&gt; 68: -9.469301e-01 -0.0092202388 2016-01-04 07:00:00
#&gt; 69: -9.659258e-01 -0.0075982787 2016-01-04 08:00:00
#&gt; 70: -9.807853e-01 -0.0059437816 2016-01-04 09:00:00
#&gt; 71: -9.914449e-01 -0.0042638324 2016-01-04 10:00:00
#&gt; 72: -9.978589e-01 -0.0025656247 2016-01-04 11:00:00
#&gt; 73: -1.000000e+00 -0.0008564307 2016-01-04 12:00:00
#&gt; 74: -9.978589e-01  0.0008564307 2016-01-04 13:00:00
#&gt; 75: -9.914449e-01  0.0025656247 2016-01-04 14:00:00
#&gt; 76: -9.807853e-01  0.0042638324 2016-01-04 15:00:00
#&gt; 77: -9.659258e-01  0.0059437816 2016-01-04 16:00:00
#&gt; 78: -9.469301e-01  0.0075982787 2016-01-04 17:00:00
#&gt; 79: -9.238795e-01  0.0092202388 2016-01-04 18:00:00
#&gt; 80: -8.968727e-01  0.0108027164 2016-01-04 19:00:00
#&gt; 81: -8.660254e-01  0.0123389351 2016-01-04 20:00:00
#&gt; 82: -8.314696e-01  0.0138223166 2016-01-04 21:00:00
#&gt; 83: -7.933533e-01  0.0152465088 2016-01-04 22:00:00
#&gt; 84: -7.518398e-01  0.0166054131 2016-01-04 23:00:00
#&gt; 85: -7.071068e-01  0.0178932105 2016-01-05 00:00:00
#&gt; 86: -6.593458e-01  0.0191043864 2016-01-05 01:00:00
#&gt; 87: -6.087614e-01  0.0202337544 2016-01-05 02:00:00
#&gt; 88: -5.555702e-01  0.0212764784 2016-01-05 03:00:00
#&gt; 89: -5.000000e-01  0.0222280932 2016-01-05 04:00:00
#&gt; 90: -4.422887e-01  0.0230845239 2016-01-05 05:00:00
#&gt; 91: -3.826834e-01  0.0238421031 2016-01-05 06:00:00
#&gt; 92: -3.214395e-01  0.0244975868 2016-01-05 07:00:00
#&gt; 93: -2.588190e-01  0.0250481681 2016-01-05 08:00:00
#&gt; 94: -1.950903e-01  0.0254914892 2016-01-05 09:00:00
#&gt; 95: -1.305262e-01  0.0258256519 2016-01-05 10:00:00
#&gt; 96: -6.540313e-02  0.0260492252 2016-01-05 11:00:00
#&gt; 97: -2.449294e-16  0.0261612517 2016-01-05 12:00:00
#&gt;              baro            wl            datetime</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Jonathan Kennel.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
   </div>

  

  </body>
</html>

